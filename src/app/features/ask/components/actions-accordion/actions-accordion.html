<div class="actions-container">
  <div class="actions-header">
    <h3>Recommended Actions</h3>
    @if (selectedIndices().length > 0) {
      <button mat-raised-button color="accent"
              [disabled]="creating()"
              (click)="createJiraTickets()">
        <mat-icon>add_task</mat-icon>
        Create {{ selectedIndices().length }} JIRA Ticket(s)
      </button>
    }
  </div>

  <mat-accordion>
    @for (action of actions; track action.title; let i = $index) {
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-checkbox [checked]="isSelected(i)"
                          (click)="$event.stopPropagation()"
                          (change)="toggleSelection(i)">
            </mat-checkbox>
            <span class="action-title">{{ action.title }}</span>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <p>{{ action.description }}</p>
        @if (action.magnitude) {
          <p class="action-magnitude">Impact magnitude: {{ action.magnitude }}</p>
        }
      </mat-expansion-panel>
    }
  </mat-accordion>
</div>
