<mat-toolbar color="primary">
  <mat-icon>insights</mat-icon>
  <span style="margin-left: 16px; font-weight: 600;">TensInsight – Feedback Copilot</span>
</mat-toolbar>

<main style="flex: 1; max-width: 1200px; margin: 32px auto; padding: 0 16px; width: 100%;">
  <ti-question-form (submitQuestion)="onAskQuestion($event)"></ti-question-form>

  @if (state.loading()) {
    <div style="text-align: center; padding: 32px;">
      <mat-spinner diameter="40"></mat-spinner>
      <p>Analyzing your feedback data...</p>
    </div>
  }

  @if (state.error(); as error) {
    <div style="color: #d32f2f; padding: 16px; background: #ffebee; border-radius: 4px; margin-bottom: 16px;">
      {{ error.message }}
    </div>
  }

  @if (state.lastResponse(); as response) {
    <ti-insight-summary [summary]="response.summary"></ti-insight-summary>

    @if (response.data_preview.length > 0) {
      <ti-data-preview-table [data]="response.data_preview"></ti-data-preview-table>
    }

    @if (response.recommendations.length > 0) {
      <ti-recommendations-list [recommendations]="response.recommendations"></ti-recommendations-list>
    }

    @if (response.actions.length > 0) {
      <ti-actions-accordion [actions]="response.actions"></ti-actions-accordion>
    }
  }

  @if (!state.hasResponse() && !state.loading() && !state.error()) {
    <div class="empty-state">
      <div class="empty-state__icon">&#128161;</div>
      <div class="empty-state__title">Ready to analyze your feedback data</div>
      <div class="empty-state__subtitle">Enter a natural language question above to get started</div>
    </div>
  }
</main>

<footer style="padding: 16px; text-align: center; background: #f5f5f5; color: #757575; font-size: 14px;">
  TensInsight &copy; {{ currentYear }} – AI-Powered Feedback Analytics
</footer>
